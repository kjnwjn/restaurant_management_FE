"use strict";(self["webpackChunkstore_system"]=self["webpackChunkstore_system"]||[]).push([[727],{4629:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("main",[e("Loading",{attrs:{active:t.isLoading,"is-full-page":!0,"can-cancel":!1}}),e("div",{staticClass:"flex items-center mb-4 text-green-700 font-bold text-lg uppercase"},[e("ThemifyIcon",{attrs:{icon:"menu"}}),e("h1",{staticClass:"ml-2"},[t._v("Customer system")])],1),e("div",{staticClass:"flex items-center mb-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customerIDToSearch,expression:"customerIDToSearch"}],staticClass:"w-full px-3 py-2 border",attrs:{type:"text",placeholder:"Enter customer ID for searching..."},domProps:{value:t.customerIDToSearch},on:{input:function(e){e.target.composing||(t.customerIDToSearch=e.target.value)}}}),e("button",{staticClass:"text-white px-4 py-2 rounded-md ml-4 transition-all",class:{"bg-blue-400 hover:bg-blue-500 cursor-pointer":t.customerIDToSearch,"bg-gray-400 cursor-default":!t.customerIDToSearch},on:{click:t.customerSearchingHandler}},[t._v(" Search ")])]),e("div",{staticClass:"grid grid-cols-3"},[e("div",{staticClass:"col-span-2"},[e("div",{staticClass:"overflow-x-auto relative"},[e("table",{staticClass:"overflow-scroll w-full text-sm text-left text-gray-500 dark:text-gray-400 mb-4"},[t._m(0),t.customerList.length>0?e("tbody",t._l(t.customerList,(function(s,a){return e("tr",{key:a,staticClass:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("th",{staticClass:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",attrs:{scope:"row"}},[t._v(t._s(s.customerID))]),e("td",{staticClass:"py-4 px-6"},[t._v(t._s(s.fullName))]),e("td",{staticClass:"py-4 px-6"},[t._v(t._s(s.point))]),e("td",{staticClass:"py-4 px-6"},[t._v(t._s(t.dateFormat(s.createdAt)))]),e("td",{staticClass:"py-4 px-6"},[t._v(t._s(t.dateFormat(s.updatedAt)))])])})),0):t._e()]),t.customerList.length<=0?e("div",{staticClass:"flex w-full justify-center p-8"},[e("h1",{},[t._v("Empty list, there is no data!")])]):t._e()])]),e("div",{staticClass:"px-4"},[e("div",{staticClass:"mb-4 flex items-center text-green-900 font-bold text-xl"},[e("ThemifyIcon",{attrs:{icon:"settings"}}),e("h1",{staticClass:"ml-2"},[t._v("Create new customer")])],1),e("div",{staticClass:"mb-6"},[e("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"},[t._v("Phone number")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.customerID,expression:"customer.customerID"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",attrs:{type:"tel",placeholder:"0123-456-789",pattern:"[0-9]{4}-[0-9]{3}-[0-9]{3}"},domProps:{value:t.customer.customerID},on:{input:function(e){e.target.composing||t.$set(t.customer,"customerID",e.target.value)}}})]),e("div",{staticClass:"mb-6"},[e("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"},[t._v("Full name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.fullName,expression:"customer.fullName"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",attrs:{type:"text",placeholder:"Mr.Jone"},domProps:{value:t.customer.fullName},on:{input:function(e){e.target.composing||t.$set(t.customer,"fullName",e.target.value)}}})]),e("div",{staticClass:"mb-6"},[e("button",{staticClass:"py-3 w-full text-white rounded-md uppercase transition-all",class:{"bg-blue-400 hover:bg-blue-500 cursor-pointer":t.customer.customerID&&t.customer.fullName,"bg-gray-400 cursor-default":!t.customer.customerID||!t.customer.fullName},on:{click:t.newCustomerHandler}},[t._v(" New Customer ")])])])])],1)},r=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",[e("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Customer ID")]),e("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Fullname")]),e("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Point")]),e("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Created at")]),e("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Last modified")])])])}],o=s(196),c=s(629),l=s(8510),i=s(7973),u=s(7398),n=s.n(u),m={data(){return{isLoading:!0,customerList:[],customer:{customerID:null,fullName:null},customerIDToSearch:null}},mounted(){this.fetchData()},methods:{dateFormat:l.Z,async fetchData(){this.isLoading=!0,await o.ZP.get(`http://localhost:3000/api/v1/customer/get-all?token=${this.accessToken}`).then((t=>{t.data.status&&(this.customerList=t.data.data)})),this.isLoading=!1},async newCustomerHandler(){this.isLoading=!0,await o.ZP.post(`http://localhost:3000/api/v1/customer/new?token=${this.accessToken}`,{customerID:this.customer.customerID,fullName:this.customer.fullName}).then((t=>{t.data.status?(this.toastify.success(t.data.msg.en),this.customer={customerID:null,fullName:null}):this.toastify.error(t.data.msg.en)})),this.fetchData(),this.isLoading=!1},async customerSearchingHandler(){await o.ZP.get(`http://localhost:3000/api/v1/customer/detail?customerID=${this.customerIDToSearch}&token=${this.accessToken}`).then((t=>{t.data.status?(this.toastify.success(t.data.msg.en),this.customerList=[t.data.data]):this.toastify.error(t.data.msg.en)}))}},components:{ThemifyIcon:i.Z,Loading:n()},computed:{...(0,c.rn)(["accessToken","payload","toastify"])}},d=m,p=s(1001),h=(0,p.Z)(d,a,r,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=customer.f37bcffd.js.map